<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Homepage</title>
        <link rel="stylesheet" href="css/home.css">
    </head>
<body>
    <div class="container">
        <nav>
            <h1> Talks@UBC </h1>
            <!-- Navigation links go here -->
            <ul>
                <li><a href="Home.html">Home</a></li>
                <li><a href="LogIn.html">Login</a></li>
                <li><a href = "Profile.html">Profile</a></li>
            </ul>
        </nav>
        <div class="main-content">
            <header>
                <!-- <form action="php/search.php" method="get">
                    <input type="search" name="searchQuery" placeholder="Search...">
                    <button type="submit">Search</button>
                </form>                 -->

                <form onsubmit="performSearch(event)">
                    <input type="search" id="searchQuery" name="searchQuery" placeholder="Search...">
                    <button type="submit">Search</button>
                </form>

            </header>
            <main>
                <div class="filter-dropdown">Sort by</div>
                <div class="post">
                    <h2>Post Title 1</h2>
                    <p>This is the content of the first post...</p>
                    <p class="username">Posted by: Username1</p>
                    <p class="post-category">Category: <span class="category">Education</span></p>
                    <span class="post-date">March 22, 2024</span>
                </div>
                <div class="post">
                    <h2>Post Title 2</h2>
                    <p>This is the content of the second post...</p>
                    <p class="post-category">Category: <span class="category">Education</span></p>
                    <p class="username">Posted by: Username1</p>
                    <span class="post-date">March 22, 2024</span>
                </div>
                <!-- Repeat for more posts -->
            </main>
            <footer>
                <p>Talks@UBC</p>
            </footer>
        </div>
    </div>
</body>

<script>
    function performSearch(event) {
        event.preventDefault(); // Prevent the form from submitting through the browser
        var searchQuery = document.getElementById('searchQuery').value;
    
        // Perform an AJAX request to search.php
        var xhr = new XMLHttpRequest();
        xhr.open("GET", "php/search.php?searchQuery=" + encodeURIComponent(searchQuery), true);
        xhr.onload = function () {
            if (xhr.status === 200) {
                // Replace the content of the 'main' section with the search results
                document.querySelector('main').innerHTML = xhr.responseText;
            } else {
                // Handle request failure
                console.error("Request failed.  Returned status of " + xhr.status);
            }
        };
        xhr.send();
    }
    </script>
    
</html>